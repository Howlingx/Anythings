parsers: # array
  # - reg: ^.*$ åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œæˆ–  - url: https://example.com/profile.yaml æŒ‡å®šè®¢é˜…
  - reg: ^.*$
  # åˆ é™¤æœåŠ¡å•†æä¾›çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const rawObj = yaml.parse(raw)
        const groups = []
        const rules = []
        return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
      } 
  # å»ºç«‹è‡ªå·±çš„é…ç½®
    yaml:
      prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„
        - name: ğŸ”° PROXY 
          type: select
          proxies:
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ Apple
          type: select
          proxies:
            - DIRECT
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ–¥ Microsoft
          type: select
          proxies:
            - DIRECT
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸµ Spotify
          type: select
          proxies:
            - DIRECT
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ“² Telegram
          type: select
          proxies:
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ“Ÿ Twitter
          type: select
          proxies:
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ§­ Final
          type: select
          proxies:
            - ğŸ”° PROXY
            - ğŸ‡­ğŸ‡° â€HongKong
            - ğŸ‡¹ğŸ‡¼ â€Taiwan
            - ğŸ‡¸ğŸ‡¬ â€Singapore
            - ğŸ‡¯ğŸ‡µ â€Japan
            - ğŸ‡ºğŸ‡¸ United States

        - name: ğŸ‡­ğŸ‡° â€HongKong
          type: select

        - name: ğŸ‡¹ğŸ‡¼ â€Taiwan
          type: select

        - name: ğŸ‡¸ğŸ‡¬ â€Singapore
          type: select

        - name: ğŸ‡¯ğŸ‡µ â€Japan
          type: select

        - name: ğŸ‡ºğŸ‡¸ United States
          type: select
        
      commands:
        - proxy-groups.ğŸ‡­ğŸ‡° â€HongKong.proxies.2+[]proxyNames|é¦™æ¸¯
        - proxy-groups.ğŸ‡¹ğŸ‡¼ â€Taiwan.proxies.2+[]proxyNames|å°æ¹¾
        - proxy-groups.ğŸ‡¸ğŸ‡¬ â€Singapore.proxies.2+[]proxyNames|æ–°åŠ å¡
        - proxy-groups.ğŸ‡¯ğŸ‡µ â€Japan.proxies.2+[]proxyNames|æ—¥æœ¬
        - proxy-groups.ğŸ‡ºğŸ‡¸ United States.proxies.2+[]proxyNames|ç¾å›½

      prepend-rules:
        - RULE-SET,Lan,DIRECT
        - RULE-SET,Apple,ğŸ Apple
        - RULE-SET,Microsoft,ğŸ–¥ Microsoft
        - RULE-SET,Spotify,ğŸµ Spotify
        - RULE-SET,Telegram,ğŸ“² Telegram
        - RULE-SET,Twitter,ğŸ“Ÿ Twitter
        - RULE-SET,PROXY,ğŸ”° PROXY
        - RULE-SET,China,DIRECT
        - GEOIP,CN,DIRECT
        - MATCH,ğŸ§­ Final

      mix-rule-providers:
        Lan: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml
          path: ./Rule/Lan.yaml
          interval: 3600

        Apple: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Classical.yaml
          path: ./Rule/Apple.yaml
          interval: 3600

        Microsoft: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml
          path: ./Rule/Microsoft.yaml
          interval: 3600

        Spotify: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml
          path: ./Rule/Spotify.yaml
          interval: 3600

        Telegram:
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml
          path: ./ruleset/Telegram.yaml
          interval: 3600

        Twitter: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml
          path: ./Rule/Twitter.yaml
          interval: 3600

        PROXY: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Proxy/Proxy_Classical.yaml
          path: ./Rule/Proxy.yaml
          interval: 3600

        China: 
          type: http
          behavior: classical
          url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml
          path: ./Rule/China.yaml
          interval: 3600
